#!/bin/zsh
# install command output as a function
# args: <function> <command>
zmodload -F zsh/files b:zf_mkdir

private REPLY name=$1 generator=$2 dir=${XDG_DATA_HOME:-~/.local/share}/zsh/site-functions
zf_mkdir -pm 0700 $dir

private file=$dir/$name
eval "$generator" >| $file
print -r -- "#$generator" >>| $file
autoload -Uz $file
..znap.compinit
