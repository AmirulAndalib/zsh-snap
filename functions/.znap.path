#!/bin/zsh
# print plugins dir or repo path
emulate -L zsh -o extendedglob -o NO_shortloops -o warncreateglobal

local basedir; zstyle -s ':znap:' plugins-dir basedir ||
  basedir=${${(%):-%x}:A:h:h:h}
REPLY=$basedir${1:+/$1}
if [[ -e $REPLY ]]; then
  print -r $REPLY
  return 0
else
  print -u2 "znap path: no such file or directory '$basedir/$1'"
  return 1
fi
